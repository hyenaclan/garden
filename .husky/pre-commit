echo "ğŸ” Running pre-commit checks..."

# Run linting
echo "ğŸ¨ Running linter..."
npm run lint || exit 1

# Check formatting
echo "ğŸ’… Checking formatting..."
npm run format:check || exit 1

# Check types
echo "ğŸ” Checking types..."
npm run check-types || exit 1

# Generate OpenAPI spec (optional - only if script exists)
if npm run | grep -q "^ *generate-openapi$"; then
  echo "ğŸ“„ Generating OpenAPI spec..."
  if npm run generate-openapi 2>/dev/null; then
    git add apps/api/openapi.json 2>/dev/null
    echo "âœ… OpenAPI spec generated and staged"
  else
    echo "âš ï¸  OpenAPI generation skipped (not available on this branch)"
  fi
fi

echo "âœ… All pre-commit checks passed!"
